{
  "pluginAlias": "RinnaiTouchPlatform",
  "pluginType": "platform",
  "singular": true,
  "headerDisplay": "Rinnai Touch WiFi Module Plugin Configuration Options",
  "footerDisplay": "For more information see https://github.com/mantorok1/homebridge-rinnai-touch-plugin#readme",
  "schema": {
    "type": "object",
    "properties": {
      "name": {
        "title": "Name",
        "type": "string",
        "placeholder": "Rinnai Touch",
        "required": false
      },
      "serviceType": {
        "title": "Service Type",
        "type": "string",
        "default": "thermostat",
        "oneOf": [
          { "title": "Thermostat", "enum": ["thermostat"] },
          { "title": "Heater Cooler", "enum": ["heatercooler"] }
        ],
        "required": true
      },
      "controllers": {
        "title": "Number of Controllers",
        "type": "number",
        "description": "Select 'None' for plugin to discover",
        "enum": [1, 2, 3, 4],
        "required": false
      },
      "showZoneSwitches": {
        "title": " Show 'Zone' switch accessories (if applicable)",
        "type": "boolean",
        "default": true,
        "required": false
      },
      "showFan": {
        "title": " Show 'Fan' accessory",
        "type": "boolean",
        "default": true,
        "required": false
      },
      "showAuto": {
        "title": " Show 'AUTO' option in Thermostat/Heater Cooler",
        "type": "boolean",
        "default": true,
        "required": false
      },
      "showAdvanceSwitches": {
        "title": " Show 'Advance Period' switch accessory(ies)",
        "type": "boolean",
        "default": true,
        "required": false
      },
      "showManualSwitches": {
        "title": " Show 'Manual' switch accessory(ies)",
        "type": "boolean",
        "default": true,
        "required": false
      },
      "closeConnectionDelay": {
        "title": " Close Connection Delay (ms)",
        "type": "number",
        "placeholder": 1100,
        "minimum": 0,
        "maximum": 9999
      },
      "clearCache": {
        "title": " Clear plugin's accessory cache",
        "type": "boolean",
        "default": false,
        "required": false
      },
      "debug": {
        "title": " Display debug messages in homebridge log",
        "type": "boolean",
        "default": false,
        "required": false
      },
      "mqtt": {
        "type": "object",
        "properties": {
          "host": {
            "title": "Host Name",
            "type": "string",
            "placeholder": "mqtt://localhost"
          },
          "port": {
            "title": "Port",
            "type": "number",
            "placeholder": 1883,
            "minimum": 0,
            "maximum": 65535
          },
          "username": {
            "title": "Username",
            "type": "string"
          },
          "password": {
            "title": "Password",
            "type": "string"
          },
          "topicPrefix": {
            "title": "Topic Prefix",
            "type": "string"
          },
          "formatNative": {
            "title": "Native Rinnai Touch",
            "type": "boolean"
          },
          "formatHomeAssistant": {
            "title": "Home Assistant HVAC",
            "type": "boolean"
          },
          "publishCommandProcessed": {
            "title": "After command processed",
            "type": "boolean"
          },
          "publishStatusChanged": {
            "title": "When status has changed [NOT YET IMPLEMENTED]",
            "type": "boolean"
          },
          "publishIntervals": {
            "title": "At regular intervals",
            "type": "boolean"
          },
          "publishFrequency": {
            "title": "Publish Frequency (secs)",
            "type": "number",
            "placeholder": 60,
            "minimum": 1,
            "maximum": 86400
           }
        }
      },
      "maps": {
        "type": "object",
        "properties": {
          "Mode": { "type": "string", "placeholder": "SYST.OSS.MD" },
          "TempUnits": { "type": "string",  "placeholder": "SYST.CFG.TU" },

          "HeatState": { "type": "string", "placeholder": "HGOM.OOP.ST" },
          "HeatOperation": { "type": "string", "placeholder": "HGOM.GSO.OP" },
          "HeatSchedulePeriod": { "type": "string", "placeholder": "HGOM.GSS.AT" },
          "HeatScheduleState": { "type": "string", "placeholder": "HGOM.GSO.AO" },
          "HeatActive": { "type": "string", "placeholder": "HGOM.Z{zone}S.AE" },
          "HeatCurrentTemp": { "type": "string", "placeholder": "HGOM.Z{zone}S.MT" },
          "HeatTargetTemp": { "type": "string", "placeholder": "HGOM.GSO.SP" },
          "HeatFanSpeed": { "type": "string", "placeholder": "HGOM.OOP.FL" },
          "HeatZoneSwitch": { "type": "string", "placeholder": "SHGOM.Z{zone}O.UE" },

          "CoolState": { "type": "string", "placeholder": "CGOM.OOP.ST" },
          "CoolOperation": { "type": "string", "placeholder": "CGOM.GSO.OP" },
          "CoolSchedulePeriod": { "type": "string", "placeholder": "CGOM.GSS.AT" },
          "CoolScheduleState": { "type": "string", "placeholder": "CGOM.GSO.AO" },
          "CoolActive": { "type": "string", "placeholder": "CGOM.Z{zone}S.AE" },
          "CoolCurrentTemp": { "type": "string", "placeholder": "CGOM.Z{zone}S.MT" },
          "CoolTargetTemp": { "type": "string", "placeholder": "CGOM.GSO.SP" },
          "CoolFanSpeed": { "type": "string", "placeholder": "CGOM.OOP.FL" },
          "CoolZoneSwitch": { "type": "string", "placeholder": "SCGOM.Z{zone}O.UE" },

          "EvapState": { "type": "string", "placeholder": "ECOM.GSO.SW" },
          "EvapOperation": { "type": "string", "placeholder": "ECOM.GSO.OP" },
          "EvapSchedulePeriod": { "type": "string", "placeholder": "ECOM.GSS.AT" },
          "EvapScheduleState": { "type": "string", "placeholder": "ECOM.GSO.AO" },
          "EvapActive": { "type": "string", "placeholder": "ECOM.GSS.ZUAE" },
          "EvapCurrentTemp": { "type": "string", "placeholder": "ECOM.GSS.MT" },
          "EvapFanSpeed": { "type": "string", "placeholder": "ECOM.GSO.FL" },
          "EvapZoneSwitch": { "type": "string", "placeholder": "ECOM.GSO.ZUUE" },
          "EvapPump": { "type": "string", "placeholder": "ECOM.GSO.PS" }
        }
      }
    }
  },
  "layout": [
    "name",
    {
        "type": "flex",
        "flex-flow": "row wrap",
        "items": [ "serviceType", "controllers" ] 
    },
    {
      "type": "fieldset",
      "title": "Accessory Settings",
      "expandable": true,
      "expanded": false,
      "items": [
        "showZoneSwitches",
        "showFan",
        "showAuto",
        "showAdvanceSwitches",
        "showManualSwitches"
      ]
    },
    {
      "type": "fieldset",
      "title": "MQTT Settings",
      "expandable": true,
      "expanded": false,
      "items": [
        {
          "type": "flex",
          "flex-flow": "row wrap",
          "items": [ "mqtt.host", "mqtt.port" ] 
        },
        {
          "type": "flex",
          "flex-flow": "row wrap",
          "items": [ "mqtt.username", "mqtt.password" ] 
        },
        {
          "type": "flex",
          "flex-flow": "row wrap",
          "items": [ "mqtt.topicPrefix" ] 
        },
        {
          "type": "section",
          "title": "Select message format(s):",
          "expandable": false,
          "expanded": true,
          "items": [
            "mqtt.formatNative",
            "mqtt.formatHomeAssistant"
          ]
        },
        {
          "type": "section",
          "title": "Select publish event(s):",
          "expandable": false,
          "expanded": true,
          "items": [
            "mqtt.publishCommandProcessed",
            "mqtt.publishStatusChanged",
            "mqtt.publishIntervals",
            "mqtt.publishFrequency"
          ]
        }
      ]
    },
    {
      "type": "fieldset",
      "title": "Advanced Settings",
      "expandable": true,
      "expanded": false,
      "items": [
        "closeConnectionDelay",
        "clearCache",
        "debug"
      ]
    },
    {
      "type": "fieldset",
      "title": "Map Overrides",
      "expandable": true,
      "expanded": false,
      "items": [
        {
          "type": "section",
          "title": "System",
          "expandable": true,
          "expanded": false,
          "items": [
              "maps.Mode",
              "maps.TempUnits"
          ]
        },
        {
          "type": "section",
          "title": "Heating",
          "expandable": true,
          "expanded": false,
          "items": [
            "maps.HeatState",
            "maps.HeatOperation",
            "maps.HeatSchedulePeriod",
            "maps.HeatScheduleState",
            "maps.HeatActive",
            "maps.HeatCurrentTemp",
            "maps.HeatTargetTemp",
            "maps.HeatFanSpeed",
            "maps.HeatZoneSwitch"
          ]
        },
        {
          "type": "section",
          "title": "Cooling",
          "expandable": true,
          "expanded": false,
          "items": [
            "maps.CoolState",
            "maps.CoolOperation",
            "maps.CoolSchedulePeriod",
            "maps.CoolScheduleState",
            "maps.CoolActive",
            "maps.CoolCurrentTemp",
            "maps.CoolTargetTemp",
            "maps.CoolFanSpeed",
            "maps.CoolZoneSwitch"
          ]
        },
        {
          "type": "section",
          "title": "Evaporative Cooling",
          "expandable": true,
          "expanded": false,
          "items": [
            "maps.EvapState",
            "maps.EvapOperation",
            "maps.EvapSchedulePeriod",
            "maps.EvapScheduleState",
            "maps.EvapActive",
            "maps.EvapCurrentTemp",
            "maps.EvapFanSpeed",
            "maps.EvapZoneSwitch",
            "maps.EvapPump"
          ]
        }
      ]
    }
  ]
}